kube_vip_enabled: true
kube_vip_controlplane_enabled: true
kube_vip_address: 10.10.0.215
kube_vip_arp_enabled: true
kube_vip_lb_enable: true

apiserver_loadbalancer_domain_name: homelab.liquid.sh
loadbalancer_apiserver:
  address: '{{ kube_vip_address }}'
  port: 6443

loadbalancer_apiserver_localhost: false

kube_network_plugin: cni # calico is managed externally
kube_proxy_remove: true
kube_proxy_strict_arp: true

kube_service_addresses: 10.43.0.0/16
kube_pods_subnet: 10.42.0.0/16

# disabled because it's a hassle to make it work with cilium
# see: https://docs.cilium.io/en/stable/network/kubernetes/local-redirect-policy/#node-local-dns-cache
enable_nodelocaldns: false

kubelet_enforce_node_allocatable: pods

kube_reserved: true
kube_memory_reserved: 300Mi
kube_cpu_reserved: 50m
kube_ephemeral_storage_reserved: 1Gi

system_reserved: true
system_memory_reserved: 300Mi
system_cpu_reserved: 250m
system_ephemeral_storage_reserved: 1Gi

kube_owner: root
kube_cert_group: root

kube_oidc_auth: true

kube_oidc_url: https://auth.liquid.sh/application/o/k8s-homelab/
kube_oidc_client_id: BKtOtenCsWE9XFd4wqdzmUrTKyGk3zbRA8HUyxMX
kube_oidc_username_claim: email
kube_oidc_groups_claim: groups
